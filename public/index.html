<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Strango — Free Stranger Chat India</title>

<style>

body{margin:0;font-family:Arial;background:#000;color:#fff;}

h1{text-align:center;margin:10px 0 5px 0;font-size:28px;}
.subtitle{text-align:center;font-size:14px;margin:0;color:#ccc;}
.online{text-align:center;color:#00ff7b;margin-top:5px;}

.main-container{
 width:95%;max-width:1200px;margin:15px auto;
 display:flex;gap:20px;
}

.left-panel{flex:65%;}
.right-panel{flex:35%;}

.chat-box{
 background:#0f0f0f;border-radius:14px;padding:15px;
 height:65vh;overflow-y:auto;
}

.message{
 margin:6px 0;padding:8px 12px;border-radius:10px;
 width:fit-content;max-width:80%;
}

.stranger{background:#1a1a1a;}
.me{background:#25D366;color:#000;}
.status{background:#222;color:#bbb;font-size:13px;}

.controls{margin-top:10px;display:flex;gap:10px;}

input{flex:1;padding:10px;border-radius:8px;border:none;}

.send-btn{background:#00ff7b;border:none;padding:10px 14px;border-radius:8px;}
.next-btn{background:#7B3F00;color:#fff;border:none;padding:10px 14px;border-radius:8px;}

.utilities{
 background:#0d0d0d;padding:20px;border-radius:14px;
}

/* ⭐ FOOTER LEGAL LINKS */
.footer{
 text-align:center;
 margin-top:20px;
 font-size:14px;
 color:#aaa;
}
.footer span{
 margin:0 10px;
 cursor:pointer;
 text-decoration:underline;
}

/* ⭐ MODAL PAGES (LEGAL SECTIONS) */
.modal{
 position:fixed;
 top:0;left:0;
 width:100%;height:100%;
 background:rgba(0,0,0,0.9);
 display:none;
 justify-content:center;
 align-items:center;
 z-index:999;
}

.modal-content{
 width:80%;
 max-width:800px;
 background:#0d0d0d;
 padding:25px;
 border-radius:12px;
 max-height:80vh;
 overflow:auto;
 line-height:1.6;
}

.close-btn{
 float:right;
 cursor:pointer;
 color:#fff;
 font-weight:bold;
}

</style>
</head>

<body>

<h1>Strango — Free Stranger Chat India</h1>
<p class="subtitle">Anonymous text chat without login. Meet strangers instantly.</p>
<div class="online">Online: <span id="onlineCount">0</span></div>

<div class="main-container">

<div class="left-panel">

<div id="chat" class="chat-box"></div>

<div class="controls">
<button class="next-btn" onclick="nextStranger()">Next</button>
<input id="messageInput" placeholder="Type message..." />
<button class="send-btn" onclick="sendMessage()">Send</button>
</div>

</div>

<div class="right-panel">
<div class="utilities">
<h3>Strango Utilities</h3>
<ul>
<li>Private anonymous chat</li>
<li>No login required</li>
<li>Global random matching</li>
<li>Fast lightweight design</li>
<li>Mobile friendly</li>
</ul>
</div>
</div>

</div>

<!-- ⭐ LEGAL FOOTER -->
<div class="footer">
<span onclick="openModal('privacy')">Privacy</span>
<span onclick="openModal('terms')">Terms</span>
<span onclick="openModal('safety')">Safety</span>
<span onclick="openModal('about')">About</span>
</div>

<!-- ================= MODALS ================= -->

<div id="privacy" class="modal">
<div class="modal-content">
<span class="close-btn" onclick="closeModal()">X</span>
<h2>Privacy Policy – Strango</h2>
<p>
Strango respects user privacy under the Information Technology Act, 2000 and applicable Indian data protection principles. 
Strango does not require login, does not collect personal identity data, and does not store chat content permanently.
Temporary technical logs may be used solely for abuse prevention and platform stability.
</p>
</div>
</div>

<div id="terms" class="modal">
<div class="modal-content">
<span class="close-btn" onclick="closeModal()">X</span>
<h2>Terms of Use</h2>
<p>
By using Strango, you agree to comply with Indian cyber laws including the IT Act 2000 and related intermediary guidelines.
Users must not share illegal, abusive, harmful, or unlawful content. Strango reserves the right to block misuse to maintain
a safe anonymous environment.
</p>
</div>
</div>

<div id="safety" class="modal">
<div class="modal-content">
<span class="close-btn" onclick="closeModal()">X</span>
<h2>Safety Messaging</h2>
<p>
Strango promotes responsible anonymous communication. Never share personal information such as phone numbers, addresses,
financial details, or identity documents. If you feel unsafe, click “Next” immediately.
Strango follows Indian digital safety principles to discourage harassment or exploitation.
</p>
</div>
</div>

<div id="about" class="modal">
<div class="modal-content">
<span class="close-btn" onclick="closeModal()">X</span>
<h2>About Strango</h2>
<p>
Strango is a lightweight anonymous chat platform designed for global connections with privacy-first architecture.
Built with performance and safety in mind, Strango aims to provide fast, secure, and login-free conversations
while respecting Indian legal and digital safety frameworks.
</p>
</div>
</div>

<!-- ================= CHAT SCRIPT (UNCHANGED CORE) ================= -->

<script src="/socket.io/socket.io.js"></script>
<script>

const socket=io();
const chat=document.getElementById("chat");
const input=document.getElementById("messageInput");

let connected=false;
let statusDiv=null;
let iClickedNext=false;

function clearChat(){
 chat.innerHTML="";
 statusDiv=null;
}

function addMessage(text,type="stranger"){

 if(type==="status"){
   if(statusDiv){statusDiv.innerText=text;return;}
   statusDiv=document.createElement("div");
   statusDiv.className="message status";
   statusDiv.innerText=text;
   chat.appendChild(statusDiv);
   return;
 }

 const div=document.createElement("div");
 div.className="message "+type;
 div.innerText=text;
 chat.appendChild(div);
 chat.scrollTop=chat.scrollHeight;
}

function sendMessage(){

 if(!connected){
   addMessage("⚠️ Not connected yet","status");
   return;
 }

 if(!input.value.trim())return;

 const msg=input.value;

 socket.emit("message",msg);
 addMessage("You: "+msg,"me");

 input.value="";
}

input.addEventListener("keydown",function(e){
 if(e.key==="Enter" && !e.shiftKey){
   e.preventDefault();
   sendMessage();
 }
});

function nextStranger(){
 iClickedNext=true;
 connected=false;
 clearChat();
 socket.emit("next");
 addMessage("Looking for new stranger...","status");
}

socket.on("connect",()=>{
 addMessage("Looking for stranger...","status");
});

socket.on("status",msg=>{

 if(msg.toLowerCase().includes("connected")){
   connected=true;
   iClickedNext=false;
 }

 if(msg.toLowerCase().includes("disconnected")){
   connected=false;
   if(iClickedNext){clearChat();}
 }

 addMessage(msg,"status");
});

socket.on("message",msg=>{
 addMessage("Stranger: "+msg,"stranger");
});

socket.on("online",count=>{
 document.getElementById("onlineCount").innerText=count;
});

/* ⭐ MODAL FUNCTIONS */
function openModal(id){
 document.getElementById(id).style.display="flex";
}
function closeModal(){
 document.querySelectorAll(".modal").forEach(m=>m.style.display="none");
}

</script>

</body>
</html>
