<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Strango — Free Stranger Chat India</title>

<style>
body{
  background:#000;
  color:#fff;
  font-family:Arial,Helvetica,sans-serif;
  text-align:center;
}

h1{margin-top:40px;}

#chatWrapper{
  width:80%;
  margin:30px auto;
  position:relative;
}

#status{
  position:absolute;
  top:-18px;
  left:20px;
  color:#00ffb3;
  font-size:14px;
}

#chat{
  border:1px solid #222;
  border-radius:14px;
  height:60vh;
  overflow-y:auto;
  text-align:left;
  padding:20px;
}

.msg{
  background:#2a2a2a;
  display:inline-block;
  padding:10px 14px;
  margin:6px 0;
  border-radius:14px;
}

.you{
  background:#00e676;
  color:#000;
}

#controls{
  width:80%;
  margin:10px auto;
  display:flex;
  gap:10px;
}

#msg{
  flex:1;
  padding:12px;
  border-radius:10px;
  border:none;
}

button{
  background:#00e676;
  border:none;
  padding:12px 18px;
  border-radius:10px;
  cursor:pointer;
}

.footer{
  margin-top:20px;
}

a{color:#00ffb3;text-decoration:none;margin:0 6px;}
</style>
</head>

<body>

<h1>Strango — Free Stranger Chat India</h1>
<p>Anonymous text chat without login. Meet strangers instantly.</p>

<div id="chatWrapper">
  <div id="status">Looking for stranger...</div>
  <div id="chat"></div>
</div>

<div id="controls">
  <button id="next">Next</button>
  <input id="msg" placeholder="Type message...">
  <button id="send">Send</button>
</div>

<div class="footer">
<a href="/privacy.html">Privacy</a> |
<a href="/terms.html">Terms</a> |
<a href="/safety.html">Safety</a> |
<a href="/about.html">About</a> |
<a href="/contact.html">Contact</a>
</div>

<script src="/socket.io/socket.io.js"></script>
<script>
const socket = io();

const chat = document.getElementById("chat");
const input = document.getElementById("msg");
const sendBtn = document.getElementById("send");
const nextBtn = document.getElementById("next");
const status = document.getElementById("status");

let connected=false;

/* ===== UI MESSAGE ===== */
function addMsg(sender,text){
  const div=document.createElement("div");
  div.className="msg "+(sender==="You"?"you":"");
  div.innerText=sender+": "+text;
  chat.appendChild(div);
  chat.scrollTop=chat.scrollHeight;
}

/* ===== STATUS EVENTS ===== */

socket.on("waiting",()=>{
  connected=false;
  status.innerText="Looking for stranger...";
  chat.innerHTML="";
});

socket.on("connected",()=>{
  connected=true;
  status.innerText="Stranger connected";
  chat.innerHTML="";
});

socket.on("strangerDisconnected",()=>{
  connected=false;
  status.innerText="Stranger disconnected";
  chat.innerHTML="";
});

/* ===== MESSAGE EVENTS ===== */

socket.on("message",(msg)=>{
  addMsg("Stranger",msg);
});

/* ===== SEND ===== */

function sendMessage(){
  const text=input.value.trim();
  if(!text||!connected) return;
  socket.emit("message",text);
  addMsg("You",text);
  input.value="";
}

sendBtn.onclick=sendMessage;

input.addEventListener("keypress",(e)=>{
  if(e.key==="Enter"){
    e.preventDefault();
    sendMessage();
  }
});

/* ===== NEXT ===== */

nextBtn.onclick=()=>{
  socket.emit("next");
};
</script>

</body>
</html>
