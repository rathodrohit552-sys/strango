<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">

<title>Strango ‚Äî Free Stranger Chat India</title>

<script src="/socket.io/socket.io.js"></script>

<style>
body{
margin:0;
font-family:Arial,Helvetica,sans-serif;
background:#000;
color:#fff;
overflow-x:hidden;
}

/* ===== HEADER ===== */
.header{
padding:20px 25px 10px;
}

h1{margin:0;}
.subtitle{color:#ccc;margin-top:6px;}
.online{color:#00ffa6;margin-top:6px;}
.status{color:#00ffa6;margin-top:2px;}

/* ===== CHAT LAYOUT (FIXED HEIGHT ‚Äî NO HIDDEN PANEL) ===== */
.chat-wrapper{
display:flex;
flex-direction:column;
height:calc(100vh - 140px); /* IMPORTANT FIX */
padding:0 20px 20px;
box-sizing:border-box;
}

.chat-box{
flex:1;
background:#050505;
border-radius:12px;
padding:15px;
overflow-y:auto;
}

.controls{
display:flex;
gap:10px;
margin-top:10px;
}

.controls input{
flex:1;
padding:12px;
border-radius:10px;
border:none;
outline:none;
font-size:16px;
}

.next-btn{
background:#222;
color:#fff;
border:none;
padding:12px 18px;
border-radius:10px;
cursor:pointer;
}

.send-btn{
background:#00e676;
border:none;
padding:12px 22px;
border-radius:10px;
cursor:pointer;
}

/* ===== MESSAGE COLORS ===== */
.you{color:#00ffa6;}
.stranger{color:#fff;}
.typing{color:#aaa;font-style:italic;margin-top:5px;}

/* ===== SEO BELOW CHAT ===== */
.seo{
padding:40px 25px;
max-width:900px;
margin:auto;
line-height:1.6;
}

.footer{
text-align:center;
padding:20px;
color:#00ffa6;
}
.footer a{
color:#00ffa6;
text-decoration:none;
margin:0 6px;
}
</style>
</head>

<body>

<div class="header">
<h1>Strango ‚Äî Free Stranger Chat India</h1>
<div class="subtitle">Anonymous text chat without login. Meet strangers instantly.</div>
<div class="online">Online: <span id="onlineCount">0</span></div>
<div id="statusText" class="status">Looking for stranger...</div>
</div>

<div class="chat-wrapper">
<div id="chat" class="chat-box"></div>
<div id="typingIndicator" class="typing"></div>

<div class="controls">
<button class="next-btn" onclick="nextStranger()">Next</button>
<input id="messageInput" placeholder="Type message..." autocomplete="off">
<button class="send-btn" onclick="sendMessage()">Send</button>
</div>
</div>

<!-- ===== SEO CONTENT BELOW CHAT (UNCHANGED) ===== -->
<div class="seo">
<h2>üöÄ Strango ‚Äî Free Random Chat With Strangers Worldwide</h2>
<p>
Strango is a free online random chat platform that lets you instantly meet strangers from around the world through real-time text conversations. Designed with speed, privacy, and simplicity in mind, Strango allows users to start chatting without downloads or sign-ups.
</p>

<h3>‚≠ê Why Strango is Different</h3>
<ul>
<li>Instant global random matching</li>
<li>No registration required</li>
<li>Privacy-focused anonymous communication</li>
<li>Mobile-first modern design</li>
<li>Fast lightweight performance</li>
</ul>

<h3>‚ùì Frequently Asked Questions</h3>
<p>Strango is completely free, works worldwide, requires no signup, and allows instant anonymous conversations.</p>
</div>

<div class="footer">
<a href="privacy-policy.html">Privacy</a> |
<a href="terms.html">Terms</a> |
<a href="safety.html">Safety</a> |
<a href="about-us.html">About</a> |
<a href="contact.html">Contact</a>
</div>

<script>
const socket = io();
let isConnected = false;
let typingTimeout = null;

/* ===== STATUS EVENTS (UNCHANGED LOGIC) ===== */
socket.on("onlineCount",(n)=>{
document.getElementById("onlineCount").innerText=n;
});

socket.on("waiting",()=>{
document.getElementById("statusText").innerText="Looking for stranger...";
isConnected=false;
});

socket.on("strangerConnected",()=>{
document.getElementById("statusText").innerText="Stranger connected";
isConnected=true;
});

socket.on("disconnect",()=>{
document.getElementById("statusText").innerText="Looking for stranger...";
isConnected=false;
});

/* ===== RECEIVE MESSAGE ===== */
socket.on("message",(msg)=>{
addMessage("Stranger",msg);
});

/* ===== SAFE TYPING SYSTEM (FIX FAKE TYPING BUG) ===== */
socket.on("typing",(state)=>{
const el=document.getElementById("typingIndicator");

if(state){
el.innerText="Stranger typing...";
clearTimeout(typingTimeout);

typingTimeout=setTimeout(()=>{
el.innerText="";
},1500);
}else{
el.innerText="";
}
});

/* ===== ADD MESSAGE ===== */
function addMessage(sender,text){
const chat=document.getElementById("chat");
const div=document.createElement("div");

div.className = sender==="You" ? "you" : "stranger";
div.innerText = sender + ": " + text;

chat.appendChild(div);
chat.scrollTop=chat.scrollHeight;
}

/* ===== SEND MESSAGE (NO SELF SEND BUG) ===== */
function sendMessage(){
if(!isConnected) return;   // IMPORTANT FIX

const input=document.getElementById("messageInput");
const text=input.value.trim();
if(!text) return;

addMessage("You",text);
socket.emit("message",text);

input.value="";
}

/* ===== ENTER KEY SEND ===== */
document.getElementById("messageInput").addEventListener("keydown",(e)=>{
if(e.key==="Enter"){
e.preventDefault();
sendMessage();
}
});

/* ===== REAL TYPING EMIT (ONLY WHEN USER TYPES) ===== */
document.getElementById("messageInput").addEventListener("input",()=>{
if(isConnected){
socket.emit("typing",true);
}
});

/* ===== NEXT ===== */
function nextStranger(){
socket.emit("next");
document.getElementById("chat").innerHTML="";
}
</script>

</body>
</html>
