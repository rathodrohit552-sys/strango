<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Strango — Free Stranger Chat India</title>

<style>

*{margin:0;padding:0;box-sizing:border-box;font-family:Arial;}

body{
 background:#000;
 color:#fff;
 height:100vh;
 display:flex;
 flex-direction:column;
}

.header{text-align:center;padding:20px 10px;}

.main{
 flex:1;
 display:flex;
 justify-content:center;
 align-items:center;
 padding:10px;
}

.chat-container{
 width:100%;
 max-width:1000px;
 height:100%;
 border:1px solid #333;
 border-radius:12px;
 display:flex;
 flex-direction:column;
 overflow:hidden;
}

.chat-box{
 flex:1;
 padding:15px;
 overflow-y:auto;
}

/* ⭐ INPUT BAR */
.input-area{
 display:flex;
 border-top:1px solid #333;
}

/* ⭐ NEXT BUTTON LEFT */
.next-btn{
 background:#ff3b3b;
 color:#fff;
 border:none;
 padding:15px 20px;
 cursor:pointer;
 font-weight:bold;
}

/* ⭐ SEND BUTTON RIGHT */
.send-btn{
 background:#00c853;
 color:#fff;
 border:none;
 padding:15px 20px;
 cursor:pointer;
 font-weight:bold;
}

.input-area input{
 flex:1;
 background:#000;
 color:#fff;
 border:none;
 padding:15px;
 outline:none;
}

footer{
 text-align:center;
 padding:12px;
 font-size:14px;
 border-top:1px solid #222;
}

footer a{color:#aaa;margin:0 10px;text-decoration:none;}

</style>
</head>

<body>

<div class="header">
<h1>Strango — Free Stranger Chat India</h1>
<p>Anonymous text chat without login. Meet strangers instantly.</p>
<div>Online: <span id="onlineCount">0</span></div>
<div id="status">Connecting...</div>
</div>

<div class="main">
<div class="chat-container">

<div id="chatBox" class="chat-box"></div>

<div class="input-area">
<button class="next-btn" onclick="nextStranger()">NEXT</button>
<input id="messageInput" placeholder="Type a message..." />
<button class="send-btn" onclick="sendMessage()">SEND</button>
</div>

</div>
</div>

<footer>
<a href="/privacy.html">Privacy</a> |
<a href="/terms.html">Terms</a> |
<a href="/safety.html">Safety</a> |
<a href="/about.html">About</a> |
<a href="/contact.html">Contact</a>
</footer>

<script src="/socket.io/socket.io.js"></script>

<script>

const socket = io({transports:["websocket","polling"]});

const chatBox=document.getElementById("chatBox");
const input=document.getElementById("messageInput");
const onlineCount=document.getElementById("onlineCount");
const status=document.getElementById("status");

let connected=false;

/* ⭐ SERVER CONNECTED (NOT STRANGER) */
socket.on("connect",()=>{
 status.innerText="Waiting for stranger...";
});

socket.on("onlineCount",(c)=>{
 onlineCount.innerText=c;
});

/* ⭐ REAL STRANGER MATCH */
socket.on("strangerConnected",()=>{
 connected=true;
 status.innerText="Stranger connected";
});

socket.on("message",(msg)=>{
 addMessage("Stranger: "+msg);
});

socket.on("strangerDisconnected",()=>{
 connected=false;
 status.innerText="Waiting for stranger...";
});

/* ⭐ SEND MESSAGE (BLOCK IF NOT CONNECTED) */
function sendMessage(){

 if(!connected){
   status.innerText="Waiting for stranger...";
   return;
 }

 const msg=input.value.trim();
 if(msg==="") return;

 socket.emit("message",msg);
 addMessage("You: "+msg);
 input.value="";
}

/* ⭐ ENTER KEY = SEND */
input.addEventListener("keypress",function(e){
 if(e.key==="Enter"){
  e.preventDefault();
  sendMessage();
 }
});

/* ⭐ NEXT BUTTON */
function nextStranger(){
 connected=false;
 socket.emit("next");
 status.innerText="Finding new stranger...";
 chatBox.innerHTML="";
}

/* ⭐ ADD MESSAGE */
function addMessage(text){
 const div=document.createElement("div");
 div.innerText=text;
 div.style.marginBottom="8px";
 chatBox.appendChild(div);
 chatBox.scrollTop=chatBox.scrollHeight;
}

</script>

</body>
</html>
