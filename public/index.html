<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Strango — Free Stranger Chat India</title>
<meta name="viewport" content="width=device-width,initial-scale=1">

<script src="/socket.io/socket.io.js"></script>

<style>
body{
  background:#000;
  color:#fff;
  font-family:Arial;
  margin:0;
  padding:20px;
}

.subtitle{color:#ccc}

.online{
  text-align:center;
  color:#00ff9c;
  margin:10px 0;
}

#statusText{
  color:#00ff9c;
  margin:6px 0;
}

/* ⭐ TYPING STYLE */
#typingIndicator{
  color:#888;
  font-size:14px;
  height:18px;
  margin-bottom:6px;
}

.main-container{
  display:flex;
  gap:20px;
}

.left-panel{flex:2}

.right-panel{
  flex:1;
  background:#0b0b0b;
  padding:20px;
  border-radius:12px;
}

.chat-box{
  height:300px;
  background:#070707;
  border-radius:12px;
  padding:12px;
  overflow-y:auto;
  margin-bottom:6px;
}

/* ⭐ MESSAGE COLORS */
.msg-you{
  color:#00ff9c;
  margin:4px 0;
}

.msg-stranger{
  color:#ffffff;
  margin:4px 0;
}

.controls{
  display:flex;
  gap:10px;
}

input{
  flex:1;
  padding:10px;
  border-radius:8px;
  border:none;
}

button{
  background:#00ff9c;
  border:none;
  padding:10px 16px;
  border-radius:8px;
  cursor:pointer;
}
</style>
</head>

<body>

<h1>Strango — Free Stranger Chat India</h1>
<p class="subtitle">Anonymous text chat without login. Meet strangers instantly.</p>

<div class="online">Online: <span id="onlineCount">0</span></div>
<div id="statusText">Looking for stranger...</div>

<div class="main-container">

<div class="left-panel">

<div id="chat" class="chat-box"></div>

<!-- ⭐ STRANGER TYPING TEXT -->
<div id="typingIndicator"></div>

<div class="controls">
<button onclick="nextStranger()">Next</button>
<input id="messageInput" placeholder="Type message..." />
<button onclick="sendMessage()">Send</button>
</div>

</div>

<div class="right-panel">
<h3>Strango Utilities</h3>
<ul>
<li>Private anonymous chat</li>
<li>No login required</li>
<li>Global random matching</li>
<li>Fast lightweight design</li>
<li>Mobile friendly</li>
</ul>
</div>

</div>

<script>
const socket = io();
const chat = document.getElementById("chat");
const input = document.getElementById("messageInput");
const typingUI = document.getElementById("typingIndicator");

let typingTimer;

/* ===== ADD MESSAGE ===== */
function addMessage(sender,text){
  const div=document.createElement("div");
  div.className = sender==="You" ? "msg-you" : "msg-stranger";
  div.innerText = sender + ": " + text;
  chat.appendChild(div);
  chat.scrollTop = chat.scrollHeight;
}

/* ⭐ ENTER KEY SEND */
input.addEventListener("keydown",(e)=>{
  if(e.key==="Enter"){
    sendMessage();
  }else{
    socket.emit("typing");
    clearTimeout(typingTimer);
    typingTimer=setTimeout(()=>{
      socket.emit("stopTyping");
    },800);
  }
});

/* ===== SEND MESSAGE ===== */
function sendMessage(){
  const text=input.value.trim();
  if(!text) return;

  addMessage("You",text);
  socket.emit("message",text);

  socket.emit("stopTyping");
  input.value="";
}

/* ===== NEXT ===== */
function nextStranger(){
  chat.innerHTML="";
  socket.emit("next");
}

/* ===== SOCKET EVENTS ===== */

socket.on("online",(count)=>{
  document.getElementById("onlineCount").innerText=count;
});

socket.on("waiting",()=>{
  document.getElementById("statusText").innerText="Looking for stranger...";
});

socket.on("matched",()=>{
  document.getElementById("statusText").innerText="Stranger connected";
});

socket.on("strangerConnected",()=>{
  document.getElementById("statusText").innerText="Stranger connected";
});

socket.on("message",(msg)=>{
  typingUI.innerText="";
  addMessage("Stranger",msg);
});

/* ⭐ STRANGER TYPING RECEIVER */
socket.on("typing",()=>{
  typingUI.innerText="Stranger is typing...";
});

socket.on("stopTyping",()=>{
  typingUI.innerText="";
});

socket.on("disconnect",()=>{
  document.getElementById("statusText").innerText="Looking for stranger...";
  typingUI.innerText="";
});
</script>

</body>
</html>
