<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Strango â€” Free Stranger Chat India</title>

<script src="/socket.io/socket.io.js"></script>

<style>
body{background:#000;color:#fff;font-family:Arial;text-align:center;}
#chat{
width:80%;
height:400px;
margin:auto;
border:1px solid #333;
border-radius:10px;
padding:10px;
overflow-y:auto;
text-align:left;
}
.you{color:#00ff9c;}
.stranger{color:#ccc;}
input{width:60%;padding:10px;}
button{padding:10px 20px;background:#00c46a;border:none;border-radius:6px;cursor:pointer;}
footer a{color:#aaa;margin:0 10px;text-decoration:none;}
</style>
</head>

<body>

<h2>Online: <span id="online">0</span></h2>
<p id="status">Connecting...</p>

<div id="chat"></div>

<br>

<button onclick="nextStranger()">Next</button>
<input id="msg" placeholder="Type message...">
<button onclick="sendMsg()">Send</button>

<footer>
<br><br>
<a href="/privacy.html">Privacy</a> |
<a href="/terms.html">Terms</a> |
<a href="/safety.html">Safety</a> |
<a href="/about.html">About</a> |
<a href="/contact.html">Contact</a>
</footer>

<script>
const socket = io();

const chat = document.getElementById("chat");
const statusText = document.getElementById("status");
const online = document.getElementById("online");

let connected=false;

function addMessage(text,cls){
const div=document.createElement("div");
div.className=cls;
div.innerText=text;
chat.appendChild(div);
chat.scrollTop=chat.scrollHeight;
}

socket.on("onlineCount",(c)=>online.innerText=c);

socket.on("connected",()=>{
connected=true;
statusText.innerText="Stranger connected";
});

socket.on("message",(msg)=>{
addMessage("Stranger: "+msg,"stranger");
});

socket.on("strangerDisconnected",()=>{
connected=false;
statusText.innerText="Waiting for stranger...";
});

function sendMsg(){
const input=document.getElementById("msg");
const msg=input.value.trim();
if(!msg||!connected) return;

addMessage("You: "+msg,"you");
socket.emit("message",msg);
input.value="";
}

function nextStranger(){
chat.innerHTML="";
connected=false;
statusText.innerText="Finding new stranger...";
socket.emit("next");
}
</script>

</body>
</html>
