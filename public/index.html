<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Strango ‚Äî Free Anonymous Stranger Chat India</title>

<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:Arial;}
html,body{height:100%;background:#000;color:#fff;}

.chat-wrapper{display:flex;flex-direction:column;min-height:100vh;}

.header{max-width:1100px;margin:0 auto;text-align:center;padding:30px 20px 10px;}

.header h1{font-size:34px;font-weight:600;}

.chat-container{
border:1px solid #1a1a1a;
border-radius:16px;
margin:8px auto;
max-width:1100px;
width:95%;
display:flex;
flex-direction:column;
background:#050505;
flex:1;
}

.status-bar{
padding:10px 14px;
border-bottom:1px solid #111;
display:flex;
gap:12px;
font-size:14px;
align-items:center;
}

.chat-box{
flex:1;
padding:20px 18px;
overflow-y:auto;
display:flex;
flex-direction:column;
}

/* ‚≠ê DESKTOP DEFAULT ‚Äî ALL LEFT SIDE */
.message{
max-width:70%;
padding:10px 14px;
border-radius:18px;
margin:3px 0;
line-height:1.45;
font-size:14px;
background:#1c1c1c;
align-self:flex-start;
}

.message.you{
background:#1c1c1c; /* same as stranger on desktop */
}

/* ‚≠ê MOBILE ONLY ‚Äî INDUSTRY STYLE */
@media (max-width:768px){

.message.stranger{
align-self:flex-start;
background:#1c1c1c;
}

.message.you{
align-self:flex-end;
background:#2e7d32;
}

}

.typing{font-size:13px;color:#888;padding:4px 14px;display:none;}

.input-area{display:flex;border-top:1px solid #111;}

.next-btn{background:#ff3b3b;color:#fff;border:none;padding:15px 20px;}
.send-btn{background:#00c853;color:#fff;border:none;padding:15px 20px;}

.input-area input{
flex:1;
background:#000;
color:#fff;
border:none;
padding:15px;
outline:none;
}
</style>
</head>

<body>

<div class="chat-wrapper">

<div class="header">
<h1>Strango</h1>
</div>

<div class="chat-container">

<div class="status-bar">
üë§ <span id="onlineCount">0</span>
<span id="status">Waiting for stranger...</span>
</div>

<div id="chatBox" class="chat-box"></div>
<div id="typingIndicator" class="typing">Stranger is typing...</div>

<div class="input-area">
<button class="next-btn" onclick="nextStranger()">NEXT</button>
<input id="messageInput" placeholder="Type a message..." />
<button class="send-btn" onclick="sendMessage()">SEND</button>
</div>

</div>

</div>

<script src="/socket.io/socket.io.js"></script>
<script>
const socket=io({transports:["websocket","polling"]});
const chatBox=document.getElementById("chatBox");
const input=document.getElementById("messageInput");
const onlineCount=document.getElementById("onlineCount");
const status=document.getElementById("status");
const typingIndicator=document.getElementById("typingIndicator");

let connected=false;
let typingTimer=null;

function setStatus(text){ status.innerText=text; }

socket.on("connect",()=>{ setStatus("Waiting for stranger..."); socket.emit("next"); });

socket.on("onlineCount",(c)=>onlineCount.innerText=c);

socket.on("strangerConnected",()=>{ connected=true; setStatus("Stranger connected"); });

socket.on("message",(msg)=>{ addMessage(msg,"stranger"); typingIndicator.style.display="none"; });

socket.on("typing",()=> typingIndicator.style.display="block");
socket.on("stopTyping",()=> typingIndicator.style.display="none");

socket.on("strangerDisconnected",()=>{
 connected=false;
 typingIndicator.style.display="none";
 setStatus("Waiting for stranger...");
 socket.emit("next");
});

function sendMessage(){
 if(!connected)return;
 const msg=input.value.trim();
 if(!msg)return;
 socket.emit("message",msg);
 addMessage(msg,"you");
 input.value="";
 socket.emit("stopTyping");
}

input.addEventListener("input",()=>{
 if(!connected)return;
 socket.emit("typing");
 clearTimeout(typingTimer);
 typingTimer=setTimeout(()=>socket.emit("stopTyping"),1200);
});

input.addEventListener("keypress",(e)=>{
 if(e.key==="Enter"){e.preventDefault();sendMessage();}
});

function nextStranger(){
 connected=false;
 typingIndicator.style.display="none";
 setStatus("Finding new stranger...");
 socket.emit("next");
 chatBox.innerHTML="";
}

function addMessage(text,type){
 const div=document.createElement("div");
 div.classList.add("message",type);
 div.innerText=(type==="you"?"You: ":"Stranger: ")+text;
 chatBox.appendChild(div);
 chatBox.scrollTop=chatBox.scrollHeight;
}
</script>

</body>
</html>
