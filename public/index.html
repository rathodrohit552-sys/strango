<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Strango ‚Äî Free Stranger Chat India</title>

<style>

/* ===== GLOBAL ===== */

body{
  margin:0;
  font-family:Arial, sans-serif;
  background:#000;
  color:#fff;
  overflow-y:auto;
}

h1{
  text-align:center;
  margin:10px 0 5px 0;
  font-size:28px;
}

.subtitle{
  text-align:center;
  font-size:14px;
  margin:0;
  color:#ccc;
}

.online{
  text-align:center;
  color:#00ff7b;
  margin-top:5px;
}

/* ===== MAIN LAYOUT ===== */

.main-container{
  width:95%;
  max-width:1200px;
  margin:15px auto;
  display:flex;
  gap:20px;
  align-items:flex-start;
}

.left-panel{ flex:65%; }
.right-panel{ flex:35%; }

/* ===== CHAT PANEL ===== */

.chat-box{
  background:#0f0f0f;
  border-radius:14px;
  padding:15px;
  height:65vh;
  overflow-y:auto;
  box-shadow:0 0 15px rgba(0,0,0,0.4);
}

.chat-box::-webkit-scrollbar{
  width:6px;
}
.chat-box::-webkit-scrollbar-thumb{
  background:#333;
  border-radius:6px;
}

.message{
  margin:6px 0;
  padding:8px 12px;
  border-radius:8px;
  background:#1a1a1a;
  width:fit-content;
  max-width:80%;
  word-wrap:break-word;
}

.me{
  background:#00ff7b;
  color:#000;
  margin-left:auto;
}

/* ===== INPUT CONTROLS ===== */

.controls{
  margin-top:10px;
  display:flex;
  gap:10px;
}

input{
  flex:1;
  padding:10px;
  border-radius:8px;
  border:none;
  outline:none;
}

button{
  padding:10px 14px;
  border:none;
  border-radius:8px;
  background:#00ff7b;
  cursor:pointer;
  font-weight:bold;
}

/* ===== UTILITIES CARD ===== */

.utilities{
  background:#0d0d0d;
  padding:20px;
  border-radius:14px;
  box-shadow:0 0 20px rgba(0,0,0,0.4);
}

/* ===== SEO CARD ===== */

.seo-card{
  margin-top:20px;
  padding:22px;
  background:#0d0d0d;
  border-radius:14px;
  box-shadow:0 0 20px rgba(0,0,0,0.4);
  line-height:1.6;
}

.seo-features{
  margin-top:15px;
  display:grid;
  grid-template-columns:repeat(2,1fr);
  gap:10px;
  font-size:14px;
  color:#bbb;
}

/* ===== MOBILE ===== */

@media(max-width:900px){
  .main-container{
    flex-direction:column;
  }

  .chat-box{
    height:60vh;
  }
}

</style>
</head>

<body>

<h1>Strango ‚Äî Free Stranger Chat India</h1>
<p class="subtitle">Anonymous text chat without login. Meet strangers instantly.</p>
<div class="online">Online: <span id="onlineCount">0</span></div>

<div class="main-container">

  <!-- CHAT SIDE -->
  <div class="left-panel">

    <div id="chat" class="chat-box"></div>

    <div class="controls">
      <input id="messageInput" placeholder="Type message..." />
      <button onclick="sendMessage()">Send</button>
      <button onclick="nextStranger()">Next</button>
    </div>

    <!-- SEO -->
    <div class="seo-card">
      <h2>Free Online Random Chat ‚Äì Meet Strangers Instantly</h2>
      <p>
      Strango is a lightweight anonymous chat platform built for fast global
      connections. No login required. Start chatting with real strangers in seconds.
      Designed for privacy, speed, and mobile-friendly performance.
      </p>

      <div class="seo-features">
        <div>üåç Global Stranger Matching</div>
        <div>‚ö° Ultra Fast Lightweight Chat</div>
        <div>üîí Anonymous & Private</div>
        <div>üì± Mobile Friendly Experience</div>
      </div>
    </div>

  </div>

  <!-- UTILITIES SIDE -->
  <div class="right-panel">
    <div class="utilities">
      <h3>Strango Utilities</h3>
      <ul>
        <li>Private anonymous chat</li>
        <li>No login required</li>
        <li>Global random matching</li>
        <li>Fast lightweight design</li>
        <li>Mobile friendly</li>
      </ul>
    </div>
  </div>

</div>

<!-- SOCKET -->
<script src="/socket.io/socket.io.js"></script>
<script>

const socket = io();
const chat = document.getElementById("chat");
const input = document.getElementById("messageInput");

let connected = false;   // IMPORTANT: prevent self messages

/* ===== ADD MESSAGE UI ===== */

function addMessage(text, me=false){
  const div=document.createElement("div");
  div.className="message"+(me?" me":"");
  div.innerText=text;
  chat.appendChild(div);
  chat.scrollTop=chat.scrollHeight;
}

/* ===== SEND MESSAGE ===== */

function sendMessage(){

  // ‚ùå DO NOT SEND IF NOT CONNECTED
  if(!connected){
    addMessage("‚ö†Ô∏è Not connected to stranger yet.");
    return;
  }

  if(!input.value.trim()) return;

  socket.emit("message", input.value);
  addMessage(input.value,true);
  input.value="";
}

/* ===== NEXT STRANGER ===== */

function nextStranger(){
  connected = false;
  socket.emit("next");
  addMessage("Looking for new stranger...");
}

/* ===== ENTER KEY ===== */

input.addEventListener("keypress",e=>{
  if(e.key==="Enter") sendMessage();
});

/* ===== SOCKET EVENTS ===== */

// when page opens
socket.on("connect", ()=>{
  addMessage("Looking for stranger...");
});

/* ‚≠ê VERY IMPORTANT: CONNECTION STATUS */
socket.on("status", msg=>{
  addMessage(msg);

  // detect connection
  if(msg.toLowerCase().includes("connected")){
      connected = true;
  }

  if(msg.toLowerCase().includes("disconnected")){
      connected = false;
  }
});

/* receive message from stranger */
socket.on("message",msg=>{
  addMessage(msg,false);
});

/* ONLINE COUNT FIX */
socket.on("online",count=>{
  document.getElementById("onlineCount").innerText = count;
});

/* SYSTEM MESSAGE SUPPORT */
socket.on("system",msg=>{
  addMessage(msg,false);
});

</script>

</body>
</html>
