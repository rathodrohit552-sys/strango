<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Strango — Free Stranger Chat</title>

<style>
body{
margin:0;
background:#000;
color:#fff;
font-family:Arial,Helvetica,sans-serif;
}

.header{
text-align:center;
padding:15px;
}

.online{
color:#00ff88;
margin-top:5px;
}

.main-container{
width:100%;
padding:10px;
display:flex;
gap:20px;
box-sizing:border-box;
}

.left-panel{flex:65%;}
.right-panel{flex:35%;}

.chat-box{
background:#111;
height:65vh;
overflow-y:auto;
padding:15px;
border-radius:12px;
display:flex;
flex-direction:column;
gap:6px;
}

.message{
padding:8px 12px;
border-radius:10px;
max-width:80%;
word-wrap:break-word;
}

.me{background:#00c46a;color:#000;align-self:flex-end;}
.stranger{background:#222;color:#fff;align-self:flex-start;}
.status{background:#222;color:#fff;font-size:13px;align-self:center;}

.input-area{
display:flex;
gap:10px;
margin-top:10px;
}

.input-area input{
flex:1;
padding:10px;
border-radius:8px;
border:none;
outline:none;
}

.send-btn,.next-btn{
padding:10px 16px;
border:none;
border-radius:8px;
cursor:pointer;
}

.send-btn{background:#00ff88;}
.next-btn{background:#b36b00;color:#fff;}

.utility-box{
background:#111;
padding:20px;
border-radius:12px;
}

@media(max-width:900px){
.main-container{flex-direction:column;}
.left-panel,.right-panel{flex:100%;}
}
</style>
</head>

<body>

<div class="header">
<h2>Strango — Free Stranger Chat</h2>
<div class="online">Online: 0</div>
</div>

<div class="main-container">

<div class="left-panel">
<div id="chatBox" class="chat-box"></div>

<div class="input-area">
<button class="next-btn">Next</button>
<input type="text" placeholder="Type message...">
<button class="send-btn">Send</button>
</div>
</div>

<div class="right-panel">
<div class="utility-box">
<h3>Strango</h3>
<p>Anonymous chat platform.</p>
</div>
</div>

</div>

<script src="/socket.io/socket.io.js"></script>

<script>
document.addEventListener("DOMContentLoaded",()=>{

const socket = io({transports:["websocket","polling"]});

const chatBox = document.getElementById("chatBox");
const input = document.querySelector(".input-area input");
const sendBtn = document.querySelector(".send-btn");
const nextBtn = document.querySelector(".next-btn");

function addSystemMessage(text){
const div=document.createElement("div");
div.className="message status";
div.textContent=text;
chatBox.appendChild(div);
chatBox.scrollTop=chatBox.scrollHeight;
}

function addUserMessage(text,cls){
const div=document.createElement("div");
div.className="message "+cls;
div.textContent=text;
chatBox.appendChild(div);
chatBox.scrollTop=chatBox.scrollHeight;
}

if(sendBtn){
sendBtn.onclick=()=>{
if(!input.value.trim()) return;
addUserMessage("You: "+input.value,"me");
socket.emit("message",input.value);
input.value="";
};
}

if(nextBtn){
nextBtn.onclick=()=>{
socket.emit("next");
addSystemMessage("Looking for stranger...");
};
}

/* ⭐ SERVER EVENTS (MATCHES YOUR server.js) */

socket.on("status",(msg)=>{
addSystemMessage(msg);
});

socket.on("message",(msg)=>{
addUserMessage("Stranger: "+msg,"stranger");
});

socket.on("online",(count)=>{
const onlineText=document.querySelector(".online");
if(onlineText){
onlineText.textContent="Online: "+count;
}
});

socket.on("connect",()=>{
console.log("Socket connected:",socket.id);
});

});
</script>

</body>
</html>
