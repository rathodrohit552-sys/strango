<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Strango — Free Stranger Chat India</title>

<style>

body{margin:0;font-family:Arial;background:#000;color:#fff;}

h1{text-align:center;margin:10px 0 5px 0;font-size:28px;}
.subtitle{text-align:center;font-size:14px;margin:0;color:#ccc;}
.online{text-align:center;color:#00ff7b;margin-top:5px;}

.main-container{
 width:95%;max-width:1200px;margin:15px auto;
 display:flex;gap:20px;
}

.left-panel{flex:65%;}
.right-panel{flex:35%;}

.chat-box{
 background:#0f0f0f;border-radius:14px;padding:15px;
 height:65vh;overflow-y:auto;
}

.message{margin:6px 0;padding:8px 12px;border-radius:10px;width:fit-content;max-width:80%;}
.stranger{background:#1a1a1a;}
.me{background:#25D366;color:#000;}
.status{background:#222;color:#bbb;font-size:13px;}

.controls{margin-top:10px;display:flex;gap:10px;}
input{flex:1;padding:10px;border-radius:8px;border:none;}

.send-btn{background:#00ff7b;border:none;padding:10px 14px;border-radius:8px;}
.next-btn{background:#7B3F00;color:#fff;border:none;padding:10px 14px;border-radius:8px;}

.utilities{background:#0d0d0d;padding:20px;border-radius:14px;}

.footer{text-align:center;margin-top:20px;color:#aaa;}
.footer span{margin:0 10px;cursor:pointer;text-decoration:underline;}

.modal{
 position:fixed;top:0;left:0;width:100%;height:100%;
 background:rgba(0,0,0,0.9);
 display:none;justify-content:center;align-items:center;z-index:999;
}

.modal-content{
 width:80%;max-width:800px;background:#0d0d0d;
 padding:25px;border-radius:12px;max-height:80vh;overflow:auto;
 line-height:1.7;
}

.close-btn{float:right;cursor:pointer;}

.typing{
 color:#aaa;
 font-size:13px;
 margin-top:6px;
}

.seo-section{
 max-width:1100px;
 margin:40px auto;
 padding:30px;
 background:#0d0d0d;
 border-radius:14px;
 box-shadow:0 0 25px rgba(0,0,0,0.4);
 line-height:1.7;
}

.faq{margin-top:20px;border-top:1px solid #222;padding-top:15px;}
.faq h3{color:#00ff7b;margin-bottom:5px;}

</style>
</head>

<body>

<h1>Strango — Free Stranger Chat India</h1>
<p class="subtitle">Anonymous text chat without login. Meet strangers instantly.</p>
<div class="online">Online: <span id="onlineCount">0</span></div>

<div class="main-container">

<div class="left-panel">

<div id="chat" class="chat-box"></div>

<div id="typingIndicator" class="typing"></div>

<div class="controls">
<button class="next-btn" onclick="nextStranger()">Next</button>
<input id="messageInput" placeholder="Type message..." />
<button class="send-btn" onclick="sendMessage()">Send</button>
</div>

</div>

<div class="right-panel">
<div class="utilities">
<h3>Strango Utilities</h3>
<ul>
<li>Private anonymous chat</li>
<li>No login required</li>
<li>Global random matching</li>
<li>Fast lightweight design</li>
<li>Mobile friendly</li>
</ul>
</div>
</div>

</div>

<div class="seo-section">
<h2>Free Online Random Chat – Meet Strangers Instantly</h2>
<p>
Strango is a privacy-focused anonymous chat platform designed for fast global conversations
without registration. Built using real-time technology aligned with Indian digital safety principles.
</p>

<h2>Frequently Asked Questions</h2>

<div class="faq"><h3>1. Is Strango safe to use in India?</h3><p>Yes. Strango follows Indian digital safety practices.</p></div>
<div class="faq"><h3>2. Do I need an account?</h3><p>No login required.</p></div>
<div class="faq"><h3>3. Are chats stored?</h3><p>Messages are not permanently stored.</p></div>
<div class="faq"><h3>4. How does matching work?</h3><p>Users are paired randomly in real-time.</p></div>
<div class="faq"><h3>5. Can I stay anonymous?</h3><p>Yes.</p></div>
<div class="faq"><h3>6. What if someone behaves badly?</h3><p>Click Next immediately.</p></div>
<div class="faq"><h3>7. Does it work on mobile?</h3><p>Yes.</p></div>
<div class="faq"><h3>8. Is Strango free?</h3><p>Yes.</p></div>
<div class="faq"><h3>9. Why can't I send messages sometimes?</h3><p>You must be connected.</p></div>
<div class="faq"><h3>10. What makes Strango different?</h3><p>Fast, lightweight privacy-first chat.</p></div>

</div>

<div class="footer">
<span onclick="openModal('privacy')">Privacy</span>
<span onclick="openModal('terms')">Terms</span>
<span onclick="openModal('safety')">Safety</span>
<span onclick="openModal('about')">About</span>
</div>

<!-- LEGAL MODALS (UNCHANGED CONTENT YOU APPROVED) -->

<div id="privacy" class="modal"><div class="modal-content"><span class="close-btn" onclick="closeModal()">X</span><h2>Privacy Policy – Strango</h2><p>Strango follows Indian IT Act privacy principles and does not permanently store chat content.</p></div></div>
<div id="terms" class="modal"><div class="modal-content"><span class="close-btn" onclick="closeModal()">X</span><h2>Terms of Use</h2><p>Users must comply with Indian cyber laws and avoid illegal content.</p></div></div>
<div id="safety" class="modal"><div class="modal-content"><span class="close-btn" onclick="closeModal()">X</span><h2>Safety Guidelines</h2><p>Never share personal information and leave chats if uncomfortable.</p></div></div>
<div id="about" class="modal"><div class="modal-content"><span class="close-btn" onclick="closeModal()">X</span><h2>About Strango</h2><p>Lightweight anonymous chat built for fast global connections.</p></div></div>

<script src="/socket.io/socket.io.js"></script>
<script>

const socket=io();
const chat=document.getElementById("chat");
const input=document.getElementById("messageInput");
const typingIndicator=document.getElementById("typingIndicator");

/* ⭐ TAB NOTIFICATION */
let unreadCount = 0;
const originalTitle = document.title;

let connected=false;
let statusDiv=null;
let iClickedNext=false;
let typingTimeout;

function clearChat(){chat.innerHTML="";statusDiv=null;}

function addMessage(text,type="stranger"){
 if(type==="status"){
   if(statusDiv){statusDiv.innerText=text;return;}
   statusDiv=document.createElement("div");
   statusDiv.className="message status";
   statusDiv.innerText=text;
   chat.appendChild(statusDiv);return;
 }
 const div=document.createElement("div");
 div.className="message "+type;
 div.innerText=text;
 chat.appendChild(div);
 chat.scrollTop=chat.scrollHeight;
}

function sendMessage(){
 if(!connected){addMessage("⚠️ Not connected yet","status");return;}
 if(!input.value.trim())return;
 const msg=input.value;
 socket.emit("message",msg);
 addMessage("You: "+msg,"me");
 input.value="";
}

input.addEventListener("keydown",e=>{
 if(e.key==="Enter" && !e.shiftKey){
   e.preventDefault();
   sendMessage();
 }
});

input.addEventListener("input",()=>{
 if(!connected) return;
 socket.emit("typing");
 clearTimeout(typingTimeout);
 typingTimeout=setTimeout(()=>socket.emit("stopTyping"),1000);
});

function nextStranger(){
 iClickedNext=true;
 connected=false;
 clearChat();
 socket.emit("next");
 addMessage("Looking for new stranger...","status");
}

socket.on("connect",()=>addMessage("Looking for stranger...","status"));

socket.on("status",msg=>{
 if(msg.toLowerCase().includes("connected")){connected=true;iClickedNext=false;}
 if(msg.toLowerCase().includes("disconnected")){
   connected=false;
   typingIndicator.innerText="";
   if(iClickedNext){clearChat();}
 }
 addMessage(msg,"status");
});

/* ⭐ NEW MESSAGE + TAB NOTIFICATION */
socket.on("message", msg=>{
 addMessage("Stranger: "+msg,"stranger");

 if(document.hidden){
   unreadCount++;
   document.title="("+unreadCount+") New message – Strango";
 }
});

socket.on("online",count=>document.getElementById("onlineCount").innerText=count);

socket.on("typing",()=>typingIndicator.innerText="Stranger is typing...");
socket.on("stopTyping",()=>typingIndicator.innerText="");

/* ⭐ RESET TITLE WHEN USER RETURNS */
document.addEventListener("visibilitychange",()=>{
 if(!document.hidden){
   unreadCount=0;
   document.title=originalTitle;
 }
});

function openModal(id){document.getElementById(id).style.display="flex";}
function closeModal(){document.querySelectorAll(".modal").forEach(m=>m.style.display="none");}

</script>

</body>
</html>
